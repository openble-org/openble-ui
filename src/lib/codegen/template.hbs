#include "openble.h"

{{#each services}}
BLEService {{camelCase name}}("1234");

{{#each characteristics}}
{{#if (eq dataType "UINT32")}}
BLEUnsignedIntCharacteristic {{camelCase name}}("{{uuid}}", BLERead);
{{else if (eq dataType "INT32")}}
BLEIntCharacteristic {{camelCase name}}("{{uuid}}", BLERead);
{{/if}}
{{/each}}

void openbleSetup() {
  {{#each services}}
  {{camelCase name}}.addCharacteristic({{#each characteristics}}{{camelCase name}}{{#unless @last}}, {{/unless}}{{/each}});
  {{/each}}

  BLE.setLocalName("{{../info.title}}");

  {{#each services}}
  BLE.setAdvertisedService({{camelCase name}});
  BLE.addService({{camelCase name}});
  {{/each}}
  BLE.advertise();
}
{{/each}}
